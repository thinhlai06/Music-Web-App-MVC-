@model MusicWeb.Models.ViewModels.HomeViewModel
@{
    var isAuthenticated = User.Identity?.IsAuthenticated == true;
    var avatarUrl = Model.CurrentUser?.AvatarUrl ?? "https://ui-avatars.com/api/?name=User&background=9b4de0&color=fff";
}

<header class="header">
    <div class="search-container">
        <i class="fa-solid fa-magnifying-glass search-icon"></i>
        <input type="text" class="search-box" id="search-box" placeholder="Tìm kiếm bài hát, nghệ sĩ, người dùng...">
        <button id="search-btn" class="search-submit-btn" title="Tìm kiếm">
            <i class="fa-solid fa-arrow-right"></i>
        </button>
    </div>
    <div class="user-actions">
        @if (isAuthenticated)
        {
            <div class="icon-btn" title="Upload nhạc" onclick="switchView('upload')">
                <i class="fa-solid fa-cloud-arrow-up"></i>
            </div>
            <div class="icon-btn" style="position:relative; cursor:pointer;" title="Thông báo" onclick="switchView('notification')">
                <i class="fa-solid fa-bell"></i>
                <span id="notification-badge" style="position:absolute; top:-5px; right:-5px; background:red; color:white; border-radius:50%; padding:2px 5px; font-size:10px; display:none;">0</span>
            </div>
            <button class="auth-btn btn-login" id="logout-btn">Đăng xuất</button>
        }
        else
        {
             <button class="auth-btn btn-login" onclick="toggleAuthModal()">Đăng nhập</button>
        }
        <div class="user-avatar" onclick="switchView('profile')" style="background-image:url('@avatarUrl')" title="Trang cá nhân"></div>
    </div>
</header>

<section class="search-results-panel hidden" id="search-results">
    <div class="section-title" style="margin-top:0;">
        <span>Kết quả tìm kiếm</span>
        <a href="#" id="close-search-results">Đóng</a>
    </div>
    <div class="search-columns" id="search-columns">
        <!-- filled via JS -->
    </div>
    <div class="search-empty hidden" id="search-empty">Không tìm thấy kết quả phù hợp.</div>
</section>
